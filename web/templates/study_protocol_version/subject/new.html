{% extends "standard.html" %}

{% block titlebar_title %}
{{ _("New subject") }}
{% endblock %}

{% block titlebar_right %}
<button class="btn btn-primary" type="submit" form="study-subject-form">{{ _("Save") }}</button>
{% endblock %}

{% block content %}

{% include "study_protocol_version/subject/_form.html"%}

{% endblock %}

{% block scripts %}

<script>
    function newSubjectForm(props) {
        var url = props.url;

        return {
            lookup: function () {
                var form = this.$refs.form;
                var data = new FormData(form);
                fetch(url, {
                    method: "POST",
                    body: data,
                })
                    .then(function (x) {
                        return x.json();
                    })
                    .then((res) => (this.subjects = res));
            },
            selected: null,
            subjects: [],
        };
    }
</script>

{{ super() }}

{% endblock %}
